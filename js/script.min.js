$(function () {
  if ($(".page-home").length) {
    function e() {
      if (!(window.innerWidth < 768)) {
        var e,
          o = $(".news-cards__block"),
          n = [],
          t = [];
        $(o[0])
          .find(".news-card")
          .each(function () {
            $(this).height("auto"), n.push($(this));
          }),
          $(o[1])
            .find(".news-card")
            .each(function () {
              $(this).height("auto"), t.push($(this));
            }),
          ((e = [n, t]),
          e[0].map(function (o, n) {
            return e.map(function (e) {
              return e[n];
            });
          })).map(function (e) {
            if (void 0 === e[0] || void 0 === e[1]) return !1;
            var o = e[0].height(),
              n = e[1].height();
            o > n ? e[1].height(o) : e[0].height(n);
          });
      }
    }
    (window.onresize = e), e();
  }
  $("#offcanvas-menu")
    .on("show.bs.offcanvas", function () {
      $(".header__hamburger").addClass("header__hamburger--close"),
        $(window).scrollTop(0);
    })
    .on("hide.bs.offcanvas", function () {
      $(".header__hamburger").removeClass("header__hamburger--close");
    }),
    $('.navbar .with-drop, .navbar .drop[data-bs-toggle="dropdown"]').on(
      "mouseover",
      function () {
        [].slice
          .call(document.querySelectorAll(".collapse.show"))
          .map(function (e) {
            new bootstrap.Collapse(e, { toogle: !0 });
          }),
          [].slice
            .call(document.querySelectorAll(".drop.show"))
            .map(function (e) {
              new bootstrap.Dropdown(e).hide();
            }),
          new bootstrap.Dropdown(
            $(this).closest(".dropdown").find(".drop:first")
          ).show();
      }
    ),
    $(".navbar .menu-tree .dropd").on("mouseover", function () {
      ($collapse = $(this).closest("li").find(".collapse:first")),
        $collapse.hasClass("show") ||
          new bootstrap.Collapse($collapse, { toggle: !0 });
    }),
    $(".navbar__search-icon").click(function () {
      $(".navbar").hasClass("searching") ||
        ($(".navbar").addClass("searching"),
        $(".navbar__search").after(
          '<div class="modal-backdrop fade show"></div>'
        ));
    }),
    $(document).on(
      "click",
      ".navbar .container-fluid .modal-backdrop.fade.show",
      function () {
        $(".navbar").removeClass("searching"), $(this).remove();
      }
    ),
    $(".scroll-content").length &&
      (function (e, o) {
        if (e.length > 0 && o.length > 0) {
          var n = $(window),
            t = e.offset();
          n.scroll(function () {
            if (o.height() > e.height()) {
              var a = parseInt(e.find("div:first").css("marginTop")),
                i = n.scrollTop() - t.top + a;
              n.scrollTop() > t.top && e.height() + i <= o.height()
                ? e.stop().animate({ marginTop: i }, 300)
                : e.height() + i > o.height()
                ? e.stop().animate({ marginTop: o.height() - e.height() }, 300)
                : n.scrollTop() <= t.top &&
                  e.stop().animate({ marginTop: 0 }, 300);
            }
          });
        }
      })($(".scroll-element"), $(".scroll-content")),
    $('.search-clear input[type="text"]').on("input", function () {
      $(this).val().length &&
        $(".search-clear").find(".clear-field").removeClass("d-none");
    }),
    $(".search-clear").on("mouseover", function () {
      $(this).find('input[type="text"]').val().length &&
        $(this).find(".clear-field").removeClass("d-none");
    }),
    $(".search-clear").on("mouseleave", function () {
      $(this).find(".clear-field").addClass("d-none");
    }),
    $(".search-clear .clear-field").on("click", function (e) {
      e.preventDefault(),
        $(".search-clear").find('input[type="text"]').val(""),
        $(this).closest("form").submit();
    });
});
